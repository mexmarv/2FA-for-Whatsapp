# चैटफ्यूल का उपयोग करने वाले व्हाट्सएप/चैटबॉट्स के लिए 2FA (यदि आवश्यक हो) और client_id से ज्ञात उत्तर

इस रिपॉजिटरी में व्हाट्सएप/चैट बॉट्स के लिए क्लाइंट\_आईडी से ज्ञात उत्तर (जन्म तिथि) का उपयोग करके दो-कारक प्रमाणीकरण (2एफए) लागू करने के लिए पायथन कोड शामिल है। यह प्रोजेक्ट आपको उपयोगकर्ताओं को जवाब देने के लिए सवालों के साथ गतिशील वेब पेज बनाने, उनकी प्रतिक्रियाओं को सत्यापित करने और उन्हें आगे की बातचीत के लिए व्हाट्सएप डीप लिंक पर रीडायरेक्ट करने की अनुमति देता है, जबकि वांछित प्रवाह या ब्लॉक के लिए उपयोगकर्ता को मान्य करने के लिए चैटफ्यूल पर वापस प्रतिक्रिया देता है। आप इस रिपॉजिटरी से सीख सकते हैं और तदनुसार एकीकृत कर सकते हैं।

[![dependency - Python](https://img.shields.io/badge/dependency-Python-blue)](https://pypi.org/project/Python)![GitHub language count](https://img.shields.io/github/languages/count/mexmarv/2FA-for-Whatsapp)![GitHub commit activity](https://img.shields.io/github/commit-activity/y/mexmarv/2FA-for-Whatsapp)[![License](https://img.shields.io/badge/License-MIT-blue)](#license)[![issues - 2FA-for-Whatsapp](https://img.shields.io/github/issues/mexmarv/2FA-for-Whatsapp)](https://github.com/mexmarv/2FA-for-Whatsapp/issues)

## विन्यास

स्क्रिप्ट चलाने से पहले, आपको निम्नलिखित वेरिएबल्स को कॉन्फ़िगर करना होगा:

-   `HOST`: सर्वर होस्ट (उस सर्वर से बदलें जिसके साथ आप होस्ट कर रहे हैं)।
-   `URL_SUFFIX`: यूआरएल सर्वर तक पहुंचने के लिए पर्याप्त है (उदाहरण के लिए, "http&#x3A;//" या "https&#x3A;//", लेकिन व्हाट्सएप और Google सुरक्षा पर रीडायरेक्ट होने के बाद से https का सुझाव देते हैं)।
-   `expiration`: गतिशील रूप से जेनरेट किए गए पृष्ठों को हटाने के लिए सेकंड में समय।
-   `api_port`: एपीआई सर्वर के लिए पोर्ट. यहां आपको क्लाइंट\_आईडी और प्रश्न प्रस्तुत करने के लिए प्राप्त होता है।
-   `web_port`: वेब सर्वर के लिए पोर्ट आपको ज्ञात प्रश्न का उत्तर देने के लिए अपने व्हाट्सएप/चैट को रीडायरेक्ट करने के लिए मिलेगा।

## निर्भरताएँ

सुनिश्चित करें कि आपके सिस्टम पर Python स्थापित है। आप pip3 का उपयोग करके आवश्यक पायथन लाइब्रेरी स्थापित कर सकते हैं:

    pip3 install fastapi uvicorn waitress flask requests sqlite3

या

    pip install -r requirements.txt

## स्क्रिप्ट चलाना

स्क्रिप्ट चलाने के लिए, निम्नलिखित कमांड निष्पादित करें:

    python3 mnMFA.py

डायनामिक पेज जेनरेशन और सत्यापन को संभालने के लिए स्क्रिप्ट एपीआई और वेब सर्वर थ्रेड दोनों शुरू करेगी।

## डॉकर स्थापना

वैकल्पिक रूप से, आप स्क्रिप्ट को डॉकर कंटेनर के भीतर चला सकते हैं। इन चरणों का पालन करें:

1.  डॉकर छवि बनाएं:

        docker build -t mn_mfa .

2.  डॉकर कंटेनर चलाएँ:

        docker run -p 443:443 -p 8000:8000 mn_mfa

सर्वर आपके लोकलहोस्ट पर पोर्ट 443 और 8000 के माध्यम से पहुंच योग्य होगा।

## HTTPS (आवश्यक)

`Generate Self-Signed Certificates:`

आप स्व-हस्ताक्षरित प्रमाणपत्र बनाने के लिए ओपनएसएसएल का उपयोग कर सकते हैं। निजी कुंजी और स्व-हस्ताक्षरित प्रमाणपत्र उत्पन्न करने के लिए निम्नलिखित आदेश चलाएँ:

    openssl req -x509 -newkey rsa:4096 -nodes -out cert.pem -keyout key.pem -days 365

यह आदेश 365 दिनों के लिए वैध एक प्रमाणपत्र (cert.pem) और एक निजी कुंजी (key.pem) उत्पन्न करेगा। देश, संगठन आदि जैसे विवरण भरने के लिए संकेतों का पालन करें।

आप कई विक्रेताओं से 90 दिनों के लिए हमेशा निःशुल्क एसएसएल प्राप्त कर सकते हैं, लेकिन कुंजी और प्रमाणपत्र दोनों को स्थापित करना होगा।

## प्रयोग

एक बार स्क्रिप्ट चलने के बाद, आप एपीआई द्वारा प्रदान किए गए यूआरएल पर जाकर गतिशील रूप से जेनरेट किए गए पृष्ठों तक पहुंच सकते हैं। उपयोगकर्ता दो यादृच्छिक जनरेटर के माध्यम से कई उत्तरों का उत्तर दे सकते हैं, और उनकी प्रतिक्रियाओं को मान्य किया जाएगा, चैटफ्यूल पर वापस भेजा जाएगा, और आपके चैटबॉट के जवाब देने पर आगे की कार्रवाई के लिए व्हाट्सएप डीप लिंक पर रीडायरेक्ट किया जाएगा।

साथ ही, प्रत्येक सफल उत्तर के लिए, अन्य डेटा के साथ टाइमस्टैम्प और आईपी पता ´logs.db´ में सहेजा जाता है, जिसका उपयोग आप मदद के लिए कर सकते हैं यदि कोई उपयोगकर्ता कहता है कि उसने लेनदेन नहीं किया है, तो आपके पास जानकारी है कि उसने सही उत्तर दिया है। आईपी ​​और कुछ अतिरिक्त डेटा. कुछ कानूनों को नकारे बिना, यह डीबी मदद करता है।

## टिप्पणियाँ:

व्हाट्सएप के कुछ प्रश्नों को एमएफए करने और सिस्टम के साथ प्रमाणित करने में सक्षम नहीं होने के कारण, यह एमएफए समाधान एमएफए के रूप में तब तक मान्य है जब तक आप कर सकते हैं:

1.  चैटफ्यूल में एक वर्कफ़्लो उत्पन्न करें जो उपयोगकर्ता को कुछ लेनदेन के लिए मान्य करता है। वर्कफ़्लो का एक उदाहरण संलग्न है.
    <center><img src="/chatfuel.png"/></center>
2.  कोड को पढ़ना आसान है, आप उत्तरों और लेन-देन का उपयोग करने के लिए किसी भी बाहरी एपीआई के साथ वापस एकीकृत कर सकते हैं। मैंने समझने के लिए यह सरल सिस्टम आरेख तैयार किया (मेरे इनपुट से मदद के लिए एआई/जीपीटी को धन्यवाद)।
    <center><img src="/2FASystemDiagram.svg"/></center>
3.  चैट चैनल के माध्यम से उत्तर वापस न करें, इससे 2FA का उद्देश्य विफल हो जाता है।
4.  मैंने जोड़ा`loadtest.py`जिसे मनोरंजन के लिए आप अपने डॉकर या उत्पादन वातावरण का परीक्षण करने के लिए अधिक से अधिक अनुरोधों और थ्रेड्स के साथ लोडटेस्ट कर सकते हैं। मैंने प्रमाणपत्र एसएसएल जाँच अक्षम कर दी है क्योंकि इसे सत्यापित करने में बहुत अधिक समय लगता है। डॉकर में नवीनतम उबंटू चलाने वाले 1 सीपीयू, 8 जीबी रैम डॉकर इंस्टेंस में कुछ दिलचस्प परिणाम:


    10,000 tries with 1000 threads. Running on Docker, no certificate checking.
    Total time taken: 6.910074949264526 seconds
    Total successful requests: 10,000
    Total errors: 0
    Total requests: 10,000
    Transactions per second (TPS): 204.7162306258972

आनंद लेना!
मार्विन नहमियास

## लाइसेंस

के तहत जारी किया गया[साथ](/LICENSE)द्वारा[@मेक्समारव](https://github.com/mexmarv).
